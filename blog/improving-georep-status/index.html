
<!DOCTYPE HTML>
<html lang="en">
    <head>
    <meta charset="utf-8">
    
    <title>Improving Geo-replication Status - Aravinda Vishwanathapura</title>
    
    <meta name="generator" content="Nanoc 4.12.19">
    <link rel="apple-touch-icon" sizes="300x300" href="/images/me_fav.png">
    <link rel="icon" type="image/png" sizes="300x300" href="/images/me_fav.png">
    <link rel="stylesheet" href="/bulma-0.9.4.min.css">
    <link rel="stylesheet" href="/pygment-emacs-highlight.css">
    <link rel="stylesheet" href="/stylesheet.css">
    <script defer src="/alpinejs-3.10.5.min.js"></script>
    
    <meta property="og:title" content="Improving Geo-replication Status"/>
    <meta name="author" content=""/>
    <meta property="og:locale" content="en_US"/>
    <meta name="description" content="Until the above issues are fixed in official Gluster CLI, we can use gluster-georep-status tool"/>
    <meta property="og:description" content="Until the above issues are fixed in official Gluster CLI, we can use gluster-georep-status tool"/>
    <link rel="canonical" href="/blog/improving-georep-status/"/>
    <meta property="og:url" content="/blog/improving-georep-status/"/>
    <meta property="og:site_name" content="Aravinda Vishwanathapura"/>
    <meta property="og:type" content="article"/>
    <meta property="article:published_time" content="2019-03-28"/>
    
    <meta name="twitter:card" content="summary"/>
    <meta property="og:image" content="https://aravindavk.in/images/me.jpg"/>
    <meta name="twitter:image" content="https://aravindavk.in/images/me.jpg"/>
    
    <meta name="twitter:site" content="https://aravindavk.in"/>
    <meta name="twitter:title" content="Improving Geo-replication Status"/>
    <meta name="twitter:description" content="Until the above issues are fixed in official Gluster CLI, we can use gluster-georep-status tool"/>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <script defer data-domain="aravindavk.in" src="https://plausible.io/js/plausible.js"></script>
</head>

    <body>
        <div id="main" class="container is-max-desktop px-4">
            <nav class="has-text-centered mb-6">
    <a class="link is-info is-inline-block px-2" href="/blog">Blog Posts</a>
    <a class="link is-info is-inline-block px-2" href="/talks-articles">Talks & Articles</a>
    <a class="link is-info is-inline-block px-2" href="/projects">Projects</a>
</nav>
<div class="has-text-centered py-6">
    <a href="/">
        <figure class="image is-64x64" style="margin: auto">
            <img class="is-rounded" src="/images/me.jpg">
        </figure>
        <p class="has-text-grey pb-6 is-size-6">ARAVINDA VISHWANATHAPURA</p>
    </a>
</div>

            <div class="has-text-centered">
                <h1 class="title">Improving Geo-replication Status</h1>
                <div class="">Mar 28, 2019</div>
                <div class="">
                    <span class="icon-text">
                        <svg class="mr-1 icon" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z" clip-rule="evenodd"></path></svg>
                        <span><strong>2 minutes</strong> read.</span>
                    </span>
                </div>
                <div>
                    
                    <span class="tag is-info is-light">gluster</span>
                    
                    <span class="tag is-info is-light"> glusterfsblog</span>
                    
                </div>
            </div>
            <div class="content py-6">
                <div class="notification is-warning">
This blog was first published on <a href="https://gluster.github.io/devblog/improving-geo-replication-status">Gluster Devblog</a>
</div>
<div class="paragraph">
<p><a href="https://docs.gluster.org/en/latest/Administrator%20Guide/Geo%20Replication/">Geo-replication</a>
is a feature in Glusterfs to sync data from one Gluster Volume to
another.</p>
</div>
<div class="paragraph">
<p>Current Geo-replication status has the following limitations.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Order of bricks is not uniform. Glusterd collects the status details
from all other nodes and displays in random order. This is very
confusing to users. Order of bricks in status should be in the same
order as in Volume info.</p>
</li>
<li>
<p>If initiator Glusterd(where the command is run) couldn&#8217;t reach other
node&#8217;s Glusterd then current CLI is skipping that in the status
output. Status should be shown as "Unknown" without spoiling the
order.</p>
</li>
<li>
<p>Geo-rep status mixes the rows from multiple sessions depending on
the response received from other node&#8217;s Glusterds.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Until the above issues are fixed in official Gluster CLI, we can use
<code>gluster-georep-status</code> tool from
<a href="https://github.com/aravindavk/gluster-georep-tools">gluster-tools</a>
project. This tool merges Volume info and Geo-rep status to identify
the Offline status and bricks order.</p>
</div>
<div class="paragraph">
<p>Installation instructions are available in project
<a href="https://github.com/aravindavk/gluster-georep-tools/blob/master/README.md">README</a></p>
</div>
<div class="paragraph">
<p>This tool also supports filters like <code>--with-status=active</code>,
<code>--with-crawl-status=changelog</code> etc.</p>
</div>
<div class="paragraph">
<p>Example output:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code>$ gluster-georep-status
SESSION: photos ==&gt; bkp1.example.com::backup_photos
+-------------------------------------+---------+-----------------+---------------------+---------------------+------------+-----------------+-----------------------+
| MASTER                              | STATUS  | CRAWL STATUS    | SLAVE NODE          | LAST SYNCED         | CHKPT TIME | CHKPT COMPLETED | CHKPT COMPLETION TIME |
+-------------------------------------+---------+-----------------+---------------------+---------------------+------------+-----------------+-----------------------+
| prod1.example.com:/bricks/photos/b1 | Active  | Changelog Crawl | remote1.example.com | 2019-03-27 08:34:40 |    N/A     |       N/A       |          N/A          |
| prod2.example.com:/bricks/photos/b2 | Passive | N/A             | N/A                 | N/A                 |    N/A     |       N/A       |          N/A          |
| prod3.example.com:/bricks/photos/b3 | Passive | N/A             | N/A                 | N/A                 |    N/A     |       N/A       |          N/A          |
+-------------------------------------+---------+-----------------+---------------------+---------------------+------------+-----------------+-----------------------+

SESSION: data ==&gt; geoaccount@bkp2.example.com::backup_data
+-----------------------------------+---------+-----------------+---------------------+---------------------+------------+-----------------+-----------------------+
| MASTER                            | STATUS  | CRAWL STATUS    | SLAVE NODE          | LAST SYNCED         | CHKPT TIME | CHKPT COMPLETED | CHKPT COMPLETION TIME |
+-----------------------------------+---------+-----------------+---------------------+---------------------+------------+-----------------+-----------------------+
| prod1.example.com:/bricks/data/b1 | Stopped | N/A             | N/A                 | N/A                 |    N/A     |       N/A       |          N/A          |
| prod2.example.com:/bricks/data/b2 | Stopped | N/A             | N/A                 | N/A                 |    N/A     |       N/A       |          N/A          |
| prod3.example.com:/bricks/data/b3 | Stopped | N/A             | N/A                 | N/A                 |    N/A     |       N/A       |          N/A          |
+-----------------------------------+---------+-----------------+---------------------+---------------------+------------+-----------------+-----------------------+</code></pre>
</div>
</div>
<div class="paragraph">
<p>Comments &amp; Suggestions Welcome.</p>
</div>
            </div>
            <div class="has-text-centered mb-6 notification  is-light">
    
    <p class="has-text-grey is-uppercase is-size-5 pb-2">About Aravinda Vishwanathapura</p>
    
    Co-Founder & CTO at <a href="https://kadalu.tech">Kadalu Technologies</a>,
    Creator of <a href="https://aravindavk.in/sanka">Sanka</a>,
    Creator of <a href="https://aravindavk.in/chitra">Chitra</a>,
    <a href="https://gluster.org">GlusterFS</a> core team member,
    Maintainer of <a href="https://github.com/kadalu">Kadalu Storage</a>
    <div class="mt-6">
        Contact:
        <a href="http://in.linkedin.com/in/aravindavk">Linkedin</a> |
        <a href="https://twitter.com/aravindavk">Twitter</a> |
        <a href="http://facebook.com/aravindavk">Facebook</a> |
        <a href="https://github.com/aravindavk">Github</a> |
        mail&#64;&#97;&#114;&#97;&#118;&#105;&#110;&#100;&#97;&#118;&#107;&#46;&#105;&#110;
    </div>
</div>

        </div>
        <footer class="footer has-background-white-bis mt-6">
    <div class="content has-text-centered">
        <p>
            Copyright &copy; 2022 <strong>Aravinda Vishwanathapura</strong>.
        </p>
    </div>
</footer>

    </body>
</html>
