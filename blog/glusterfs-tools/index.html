
<!DOCTYPE HTML>
<html lang="en">
    <head>
    <meta charset="utf-8">
    
    <title>GlusterFS Tools - Aravinda VK</title>
    
    <meta name="generator" content="Nanoc 4.12.20">
    <link rel="apple-touch-icon" sizes="300x300" href="/images/me_fav.png">
    <link rel="icon" type="image/png" sizes="300x300" href="/images/me_fav.png">
    <link rel="stylesheet" href="/bulma-0.9.4.min.css">
    <link rel="stylesheet" href="/pygment-emacs-highlight.css">
    <link rel="stylesheet" href="/stylesheet.css">
    <script defer src="/alpinejs-3.10.5.min.js"></script>
    
    <meta property="og:title" content="GlusterFS Tools"/>
    <meta name="author" content=""/>
    <meta property="og:locale" content="en_US"/>
    <meta name="description" content="A wrapper around GlusterFS CLI tool"/>
    <meta property="og:description" content="A wrapper around GlusterFS CLI tool"/>
    <link rel="canonical" href="/blog/glusterfs-tools/"/>
    <meta property="og:url" content="/blog/glusterfs-tools/"/>
    <meta property="og:site_name" content="Aravinda Vishwanathapura"/>
    <meta property="og:type" content="article"/>
    <meta property="article:published_time" content="2013-06-18"/>
    
    <meta name="twitter:card" content="summary"/>
    <meta property="og:image" content="https://aravindavk.in/images/me.jpg"/>
    <meta name="twitter:image" content="https://aravindavk.in/images/me.jpg"/>
    
    <meta name="twitter:site" content="https://aravindavk.in"/>
    <meta name="twitter:title" content="GlusterFS Tools"/>
    <meta name="twitter:description" content="A wrapper around GlusterFS CLI tool"/>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <script defer data-domain="aravindavk.in" src="https://plausible.io/js/plausible.js"></script>
</head>

    <body>
        <div id="main" class="container is-max-desktop px-4">
            <nav class="has-text-centered mb-6">
    <a class="link is-info is-inline-block px-2" href="/blog">Blog Posts</a>
    <a class="link is-info is-inline-block px-2" href="/talks-articles">Talks & Articles</a>
    <a class="link is-info is-inline-block px-2" href="/projects">Projects</a>
</nav>
<div class="has-text-centered py-6">
    <a href="/">
        <figure class="image is-64x64" style="margin: auto">
            <img class="is-rounded" src="/images/me.jpg">
        </figure>
        <p class="has-text-grey pb-6 is-size-6">ARAVINDA VISHWANATHAPURA</p>
    </a>
</div>

            <div class="has-text-centered">
                <h1 class="title">GlusterFS Tools</h1>
                <div class="">Jun 18, 2013</div>
                <div class="">
                    <span class="icon-text">
                        <svg class="mr-1 icon" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z" clip-rule="evenodd"></path></svg>
                        <span><strong>2 minutes</strong> read.</span>
                    </span>
                </div>
                <div>
                    
                    <span class="tag is-info is-light">glusterfs</span>
                    
                    <span class="tag is-info is-light">tools</span>
                    
                    <span class="tag is-info is-light">glusterfsblog</span>
                    
                </div>
            </div>
            <div class="content py-6">
                <div class="notification is-warning">
    UPDATE: <br/>Installation and usage is simplified with the new release of glusterfs-tools, refer <a href="http://aravindavk.in/blog/glusterdf-df-for-gluster-volumes/">this blog</a> for more details.
</div>
<div class="paragraph">
<p>From <a href="http://gluster.org">Gluster website</a></p>
</div>
<div class="literalblock">
<div class="content">
<pre>GlusterFS is an open source, distributed file system capable of scaling to several petabytes (actually, 72 brontobytes!) and handling thousands of clients. GlusterFS clusters together storage building blocks over Infiniband RDMA or TCP/IP interconnect, aggregating disk and memory resources and managing data in a single global namespace. GlusterFS is based on a stackable user space design and can deliver exceptional performance for diverse workloads.</pre>
</div>
</div>
<div class="paragraph">
<p>Gluster CLI has limited features to view and filter the volume info. I started a small project to enhance Gluster CLI for personal use. As of now it consists of a tool to list Gluster volumes in tabular format. Other intersesting features includes filtering the output based on name, type, status, bricks etc.</p>
</div>
<div class="paragraph">
<p>Clone the project(I cloned it to <code>/home/aravinda/sandbox/</code>)</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="bash"><span class="nb">cd</span> /home/aravinda/sandbox
git clone https://github.com/aravindavk/glusterfs-tools.git</code></pre>
</div>
</div>
<div class="paragraph">
<p>Create a shellscript to call gftools /usr/local/bin/gfvolumes</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="bash"><span class="c">#!/bin/bash</span>
python /home/aravinda/sandbox/glusterfs-tools/gftools/volumes.py <span class="s2">"</span><span class="nv">$@</span><span class="s2">"</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Make gfvolumes executable</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="bash"><span class="nb">chmod</span> +x /usr/local/bin/gfvolumes</code></pre>
</div>
</div>
<div class="paragraph">
<p>Now we can run <code>sudo gfvolumes</code> to see the list of glusterfs volumes. Type <code>gfvolumes --help</code> for help.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="/images/glusterfs/all_volumes.png" alt="All Volumes">
</div>
<div class="title">All Volumes</div>
</div>
<div class="imageblock">
<div class="content">
<img src="/images/glusterfs/name_filter.png" alt="Name Filter">
</div>
<div class="title">Name Filter</div>
</div>
<div class="imageblock">
<div class="content">
<img src="/images/glusterfs/status_filter.png" alt="Status Filter">
</div>
<div class="title">Status Filter</div>
</div>
<div class="imageblock">
<div class="content">
<img src="/images/glusterfs/type_filter.png" alt="Type Filter">
</div>
<div class="title">Type Filter</div>
</div>
<div class="imageblock">
<div class="content">
<img src="/images/glusterfs/show_bricks.png" alt="Name Filter">
</div>
<div class="title">Show Bricks</div>
</div>
<div class="paragraph">
<p>Additionally it can output filtered details in JSON format.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="/images/glusterfs/json_format.png" alt="Name Filter">
</div>
<div class="title">JSON Format</div>
</div>
<div class="paragraph">
<p>We can easily import this in our python script.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="python"><span class="c1">#!/usr/bin/python
</span><span class="kn">from</span> <span class="nn">gftools</span> <span class="kn">import</span> <span class="n">volumes</span>
<span class="n">gfvols</span> <span class="o">=</span> <span class="n">volumes</span><span class="p">.</span><span class="n">GfVolumes</span><span class="p">()</span>
<span class="n">ok</span><span class="p">,</span> <span class="n">vols</span> <span class="o">=</span> <span class="n">gfvols</span><span class="p">.</span><span class="n">get</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s">'^gv[0-9]$'</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="s">'down'</span><span class="p">)</span> <span class="c1"># Various filters available
</span><span class="k">if</span> <span class="n">ok</span><span class="p">:</span>
    <span class="c1"># Do action</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Note:</strong> root permission is required to run gluster command, so run gfvolumes as root(<code>sudo gfvolumes</code>)</p>
</div>
<div class="sect1">
<h2 id="_future_plans">Future plans:</h2>
<div class="sectionbody">
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Adding more filters</p>
</li>
<li>
<p>Adding more admin tools</p>
</li>
<li>
<p>Creating RPM/DEB packages</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>C &amp; S Welcome.</p>
</div>
</div>
</div>
            </div>
            <div class="has-text-centered mb-6 notification  is-light">
    
    <p class="has-text-grey is-uppercase is-size-5 pb-2">About Aravinda VK</p>
    
    Partner at <a href="https://github.com/kadalu-investments">Kadalu Investments</a>,
    Creator of <a href="https://aravindavk.in/sanka">Sanka</a>,
    Creator of <a href="https://aravindavk.in/chitra">Chitra</a>,
    <a href="https://gluster.org">GlusterFS</a> core team member,
    Maintainer of <a href="https://github.com/kadalu">Kadalu Storage</a>
    <div class="mt-6">
        Contact:
        <a href="http://in.linkedin.com/in/aravindavk">Linkedin</a> |
        <a href="https://twitter.com/aravindavk">Twitter</a> |
        <a href="http://facebook.com/aravindavk">Facebook</a> |
        <a href="https://github.com/aravindavk">Github</a> |
        mail&#64;&#97;&#114;&#97;&#118;&#105;&#110;&#100;&#97;&#118;&#107;&#46;&#105;&#110;
    </div>
</div>

        </div>
        <footer class="footer has-background-white-bis mt-6">
    <div class="content has-text-centered">
        <p>
            Copyright &copy; 2022 <strong>Aravinda Vishwanathapura</strong>.
        </p>
    </div>
</footer>

    </body>
</html>
