
<!DOCTYPE HTML>
<html lang="en">
    <head>
    <meta charset="utf-8">
    
    <title>Improving Kannada Fonts - Adding Opentype substitution rules - Aravinda Vishwanathapura</title>
    
    <meta name="generator" content="Nanoc 4.12.10">
    <link rel="apple-touch-icon" sizes="300x300" href="/images/me_fav.png">
    <link rel="icon" type="image/png" sizes="300x300" href="/images/me_fav.png">
    <link rel="stylesheet" href="/bulma-0.9.4.min.css">
    <link rel="stylesheet" href="/pygment-emacs-highlight.css">
    <link rel="stylesheet" href="/stylesheet.css">
    <script defer src="/alpinejs-3.10.5.min.js"></script>
    
    <meta property="og:title" content="Improving Kannada Fonts - Adding Opentype substitution rules"/>
    <meta name="author" content=""/>
    <meta property="og:locale" content="en_US"/>
    <meta name="description" content="Below image shows all the consonant forms of Kannada letter "ka", we will split that into different group according to different rules required."/>
    <meta property="og:description" content="Below image shows all the consonant forms of Kannada letter "ka", we will split that into different group according to different rules required."/>
    <link rel="canonical" href="/blog/adding-font-rules/"/>
    <meta property="og:url" content="/blog/adding-font-rules/"/>
    <meta property="og:site_name" content="Aravinda Vishwanathapura"/>
    <meta property="og:type" content="article"/>
    <meta property="article:published_time" content="2013-12-03"/>
    
    <meta name="twitter:card" content="summary"/>
    <meta property="og:image" content="https://aravindavk.in/images/me.jpg"/>
    <meta name="twitter:image" content="https://aravindavk.in/images/me.jpg"/>
    
    <meta name="twitter:site" content="https://aravindavk.in"/>
    <meta name="twitter:title" content="Improving Kannada Fonts - Adding Opentype substitution rules"/>
    <meta name="twitter:description" content="Below image shows all the consonant forms of Kannada letter "ka", we will split that into different group according to different rules required."/>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <script defer data-domain="aravindavk.in" src="https://plausible.io/js/plausible.js"></script>
</head>

    <body>
        <div id="main" class="container is-max-desktop px-4">
            <nav class="has-text-centered mb-6">
    <a class="link is-info is-inline-block px-2" href="/blog">Blog Posts</a>
    <a class="link is-info is-inline-block px-2" href="/talks">Talks & Articles</a>
    <a class="link is-info is-inline-block px-2" href="/projects">Projects</a>
</nav>
<div class="has-text-centered py-6">
    <a href="/">
        <figure class="image is-64x64" style="margin: auto">
            <img class="is-rounded" src="/images/me.jpg">
        </figure>
        <p class="has-text-grey pb-6 is-size-6">ARAVINDA VISHWANATHAPURA</p>
    </a>
</div>

            <div class="has-text-centered">
                <h1 class="title">Improving Kannada Fonts - Adding Opentype substitution rules</h1>
                <div class="">Dec 3, 2013</div>
                <div class=""><strong>3 minutes</strong> read</div>
                <div>
                    
                    <span class="tag is-info is-light">ಕನ್ನಡ</span>
                    
                    <span class="tag is-info is-light">kannada</span>
                    
                    <span class="tag is-info is-light">fonts</span>
                    
                </div>
            </div>
            <div class="content py-6">
                <div class="paragraph">
<p>In my `previous blog &lt;/blog/improving-kannada-fonts/&gt;`__ we discussed about the approach to improve Kannada fonts, in this blog we will discuss about adding rules to a font using fontforge python.</p>
</div>
<div class="paragraph">
<p>Below image shows all the consonant forms of Kannada letter "ka", we will split that into different groups based on type of font rule required. (Read `OpenType specification &lt;<a href="http://www.microsoft.com/typography/OpenTypeDev/kannada/intro.htm&gt;`__" class="bare">http://www.microsoft.com/typography/OpenTypeDev/kannada/intro.htm&gt;`__</a> to understand more about rules)</p>
</div>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>image:: /images/kagunita.png
:alt: ಕ್ ಕ ಕಾ ಕಿ ಕೀ ಕು ಕೂ ಕೃ ಕೄ ಕೆ ಕೇ ಕೈ ಕೊ ಕೋ ಕೌ ಕಂ ಕಃ</p>
</li>
</ol>
</div>
<h1 id="_group_one_no_rules_required" class="sect0">Group one: No rules required</h1>
<div class="paragraph">
<p>If Unicode code points and Glyph ordering is same then no need to add any rules in font. (Some times positional rules may be required, we will discuss about positional rules later)</p>
</div>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>image:: /images/fontrules/group1.png
:alt: Group 1</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Consonant forms identified in this group are</p>
</div>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>image:: /images/fontrules/group1-detail.png
:alt: Group 1 detail</p>
</li>
</ol>
</div>
<h1 id="_group_two_above_base_substitution_separate_ligature" class="sect0">Group two: above base substitution - separate ligature</h1>
<div class="paragraph">
<p>If the required shape can&#8217;t be achieved by joining two or more base glyphs as group 1, then we need separate ligature.</p>
</div>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>image:: /images/fontrules/group2.png
:alt: Group 2</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Rule:</p>
</div>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>code-block:: text</p>
<div class="literalblock">
<div class="content">
<pre>sub \uni0C95 \uni0CBF by \uni0C95_uni0CBF.abvs;</pre>
</div>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p>Where uni0C95 uni0CBF and uni0C95_uni0CBF.abvs are glyph names(Unicode code of "ka" is U+0C95) (`Refer &lt;<a href="http://www.unicode.org/charts/PDF/U0C80.pdf&gt;`__" class="bare">http://www.unicode.org/charts/PDF/U0C80.pdf&gt;`__</a>).</p>
</div>
<div class="paragraph">
<p>In `#languageSummitPune &lt;<a href="http://www.mediawiki.org/wiki/Language_portal/Pune_LanguageSummit_November_2013&gt;`" class="bare">http://www.mediawiki.org/wiki/Language_portal/Pune_LanguageSummit_November_2013&gt;`</a><em> we(me, `Pravin &lt;<a href="http://pravin-s.blogspot.in/&gt;`" class="bare">http://pravin-s.blogspot.in/&gt;`</a></em>, `Sneha &lt;<a href="http://snehakore.blogspot.in/&gt;`" class="bare">http://snehakore.blogspot.in/&gt;`</a><em>, `Santhosh &lt;<a href="http://thottingal.in/&gt;`" class="bare">http://thottingal.in/&gt;`</a></em> and many others) discussed lot about glyph naming standard, will write about importance of glyph names in my next blog.</p>
</div>
<h1 id="_group_three_above_base_substitution_using_modified_glyph_of_base_glyph" class="sect0">Group three: above base substitution - Using modified glyph of base glyph</h1>
<div class="paragraph">
<p>Sometimes we can achieve the required shape by using half shape of base glyph instead of creating separate ligature as in group 2.</p>
</div>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>image:: /images/fontrules/group3.png
:alt: Group 3</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Following consonants can be derived using half form of "ka"</p>
</div>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>image:: /images/fontrules/group3-detail.png
:alt: Group 3 detail</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Rule:</p>
</div>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>code-block:: text</p>
<div class="literalblock">
<div class="content">
<pre>sub \uni0C95' [\uni0CCD \uni0CBE \uni0CC6 \uni0CCA \uni0CCC] by \uni0C95.half;</pre>
</div>
</div>
</li>
</ol>
</div>
<h1 id="_group_four_no_rule_required_because_of_normalization" class="sect0">Group four: No rule required because of Normalization</h1>
<div class="paragraph">
<p>Some letters in Kannada Unicode normalizes into two or more Unicode characters for which rules will be applied(`Refer &lt;<a href="http://www.unicode.org/charts/normalization/chart_Kannada.html&gt;`__" class="bare">http://www.unicode.org/charts/normalization/chart_Kannada.html&gt;`__</a>).</p>
</div>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>image:: /images/fontrules/group4.png
:alt: Group 4</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>For following consonants no rules required.</p>
</div>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>image:: /images/fontrules/group4-detail.png
:alt: Group 4 detail</p>
</li>
</ol>
</div>
<h1 id="_featurefile" class="sect0">Featurefile</h1>
<div class="paragraph">
<p>We can create featurefile and import all rules into the font using fontforge tool. Read `this &lt;<a href="http://www.adobe.com/devnet/opentype/afdko/topic_feature_file_syntax.html&gt;`__" class="bare">http://www.adobe.com/devnet/opentype/afdko/topic_feature_file_syntax.html&gt;`__</a> article to know more about featurefile syntax and specification.</p>
</div>
<div class="paragraph">
<p>For consonant forms of "ka" final featurefile looks like this..</p>
</div>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>code-block:: text</p>
<div class="literalblock">
<div class="content">
<pre>lookup kn_abvs_lookup1 {
    lookupflag 0;
    sub \uni0C95 \uni0CBF by \uni0C95_uni0CBF.abvs;
} kn_abvs_lookup1;</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>lookup kn_abvs_lookup2 {
    lookupflag 0;
    sub \uni0C95' [\uni0CCD \uni0CBE \uni0CC6 \uni0CCA \uni0CCC] by \uni0C95.half;
} kn_abvs_lookup2;</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>feature abvs {
    script knd2;
    language dflt;
    lookup kn_abvs_lookup1;
    lookup kn_abvs_lookup2;</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>    script knda;
    language dflt;
    lookup kn_abvs_lookup1;
    lookup kn_abvs_lookup2;
} abvs;</pre>
</div>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p>Once we save the above content in knda_gsub.fea, download the python script from `here &lt;<a href="https://raw.github.com/aravindavk/fontforge-python-cookbook/master/apply_gsub_featurefile.py&gt;`__" class="bare">https://raw.github.com/aravindavk/fontforge-python-cookbook/master/apply_gsub_featurefile.py&gt;`__</a> and run</p>
</div>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>code-block:: bash</p>
<div class="literalblock">
<div class="content">
<pre>python apply_gsub_featurefile.py &lt;sfd file path&gt; &lt;fea file path&gt;</pre>
</div>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p>For example:</p>
</div>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>code-block:: bash</p>
<div class="literalblock">
<div class="content">
<pre>python apply_gsub_featurefile.py Lohit-Kannada.sfd knda_gsub.fea</pre>
</div>
</div>
</li>
</ol>
</div>
            </div>
        </div>
        <footer class="footer has-background-white-bis mt-6">
    <div class="content has-text-centered">
        <p>
            Copyright &copy; 2022 <strong>Aravinda Vishwanathapura</strong>.
        </p>
    </div>
</footer>

    </body>
</html>
